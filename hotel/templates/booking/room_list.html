{% extends 'base.html' %}
{% load django_bootstrap5 %}

{% block title %}–ù–æ–º–µ—Ä–∞ - –ì–æ—Å—Ç–∏–Ω–∏—Ü–∞{% endblock %}

{% block page_title %}–ù–∞—à–∏ –Ω–æ–º–µ—Ä–∞{% endblock %}

{% block page_description %}
<p class="lead">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –Ω–æ–º–µ—Ä –¥–ª—è –≤–∞—à–µ–≥–æ –æ—Ç–¥—ã—Ö–∞</p>
{% endblock %}

{% block content %}
<!-- –§–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞ -->
<div class="card mb-4">
  <div class="card-body">
    <h5 class="card-title">üîç –ü–æ–∏—Å–∫ –Ω–æ–º–µ—Ä–æ–≤</h5>
    <form method="get">
      <div class="row g-3">
        <div class="col-md-3">
          {% bootstrap_field search_form.check_in show_label=True %}
        </div>
        <div class="col-md-3">
          {% bootstrap_field search_form.check_out show_label=True %}
        </div>
        <div class="col-md-2">
          {% bootstrap_field search_form.capacity show_label=True %}
        </div>
        <div class="col-md-2">
          {% bootstrap_field search_form.category show_label=True %}
        </div>
        <div class="col-md-2">
          <div class="form-check mt-4">
            {% bootstrap_field search_form.needs_child_bed show_label=True %}
          </div>
        </div>
      </div>
      <div class="mt-3">
        {% bootstrap_button "–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã" button_type="submit" button_class="btn-primary" %}
        <a href="{% url 'room_list' %}" class="btn btn-outline-secondary">–°–±—Ä–æ—Å–∏—Ç—å</a>
      </div>
    </form>
  </div>
</div>

<!-- –°–ø–∏—Å–æ–∫ –Ω–æ–º–µ—Ä–æ–≤ -->
<div class="row">
  {% for room in rooms %}
  <div class="col-md-6 col-lg-4">
    <div class="card room-card h-100">
      <div class="card-header">
        <h5 class="card-title mb-0">–ù–æ–º–µ—Ä {{ room.number }}</h5>
        <small class="text-muted">–≠—Ç–∞–∂: {{ room.floor }}</small>
      </div>
      <div class="card-body">
        <div class="mb-3">
          <span class="badge bg-primary">{{ room.room_type.get_category_display }}</span>
          <span class="badge bg-secondary">{{ room.room_type.get_capacity_display }}</span>
          {% if room.room_type.has_child_bed %}
          <span class="badge bg-success">–î–µ—Ç—Å–∫–∞—è –∫—Ä–æ–≤–∞—Ç—å</span>
          {% endif %}
        </div>

        <p class="card-text">{{ room.room_type.description|default:"–ö–æ–º—Ñ–æ—Ä—Ç–∞–±–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –¥–ª—è –æ—Ç–¥—ã—Ö–∞." }}</p>

        {% if room.room_type.has_child_bed %}
        <p class="text-success">‚úì –í–æ–∑–º–æ–∂–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–µ—Ç—Å–∫–æ–π –∫—Ä–æ–≤–∞—Ç–∏</p>
        {% endif %}
      </div>
      <div class="card-footer">
        <div class="d-grid gap-2">
          <a href="{% url 'room_detail' room.pk %}" class="btn btn-outline-primary">
            –ü–æ–¥—Ä–æ–±–Ω–µ–µ –∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
          </a>
        </div>
      </div>
    </div>
  </div>
  {% empty %}
  <div class="col-12">
    <div class="alert alert-warning text-center">
      <h5>üòî –ù–æ–º–µ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h5>
      <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞</p>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}